---
title:  组件间的传值
date:  2019-02-12 12：30
tags:
---

## Vue

#### 传值

#### 一.父向子传值

        方法1：属性绑定进行传值：使用v-bind绑定属性，props定义属性进行接收（
        通过属性绑定 在子组件使用的地方 :sonmsg="msg"
        在子组件 声明 props:['sonmsg']）
        
        方法2：在子组件中使用this.$parent.xxx直接获取父组件中的数据


#### 二.子向父传值

		方法1：使用发布订阅者模式，this.$emit('消息名称'，‘传递的数据’)

		1.子组件需要想办法触发this.$emit

		触发时机：点击某个按钮时候触发 或者 直接在created中写

		2.在父组件中，在子组件的位置  绑定事件@change=‘getdata’

		在methods中声明下这个处理函数


		方法2：在父组件中使用this.$refs.xxx获取到子组件的对象再进一步的获取子组件身上的数据
			
			<son ref='xxx'></son>

		方法3：直接给子组件绑定属性，属性值是父组件中的一个函数，子组件接收到这个属性之后调用函数


#### 三.兄弟组件传值

		event.bus 事件总线

		需要使用一个空的vue实例当作中介进行数据的传输，利用vue实例提供的方法进行传输，这个vue实例本身不保存数据

		一般用的比较多的是用vuex数据共享



#### 四.插槽

插槽就是Vue实现的一套内容分发的API，将<slot></slot>元素作为承载分发内容的出口，没有插槽的情况下在组件标签内写内容是不起作用的，只有在组件中声明了slot元素之后，在组件内部写的内容就会展示出来

一。默认插槽：没有名字的
	
合成组件 <son>组件xxx</son>

在son组件的模板中写上<slot></slot>  页面就可以展示‘组件xxx’
		
	
二。具名插槽：

有多个插槽，并且在组件中给插槽取名字

    <div id="app">
		<child-component>
		    <template slot="girl">漂亮、美丽、购物、逛街</template>
		    <template slot="boy">帅气、才实</template>
		    <div>我是一类人，我是默认的插槽</div>
		</child-component>
    </div>

	<template slot='hello' slot-scope='scope'>
		<div>
		 	<p>父组件</p>
			<div>{{list}}</div>
		</div>
	</template>

		<script>
         Vue.component('child-component',{
	        template:`
	            <div>
	            <slot name="girl"></slot>
	            <div style="height:1px;background-color:red;"></div>
	            <slot name="boy"></slot>
	            <div style="height:1px;background-color:red;"></div>
	            <slot></slot>
	            </div>
	        `
	    })
	    let vm = new Vue({
	        el:'#app',
	        data:{
	
	        }
	    })
		</script>


三。作用域插槽：携带数据的插槽，将子组件的值传到父组件中

用处：用的最多的是 做table表格

作用：让父组件决定子组件的结构是什么样的，可以使用子组件的数据在父组件中渲染页面（子向父传值）

1.子组件中slot占位置 并通过属性绑定需要传到父组件中的数据<slot name=‘hello’ :mlist='list'></slot>

2.在当前插槽对应的父组件模板身上加上slot-scope

	<div id="app">
		<child :lists="nameList">
		    <template slot-scope="a">
		        {{a}}
		    </template>
		</child>
    </div>
    <script>
	    Vue.component('child',{
	        props:['lists'],
	        template:`
	            <div>
	                <ul>
	                    <li v-for="list in lists">
	                        <slot :bbbbb="list"></slot>
	                    </li>
	                </ul>
	            </div>
        `
    })

    let vm = new Vue({
        el:'#app',
        data:{
            nameList:[
            {id:1,name:'孙悟空'},
            {id:2,name:'猪八戒'}
            ]
        }
    	})
     </script>


 	输出：

	{'bbbbb':{"id":1,"name":"孙悟空"}}
	{'bbbbb':{"id":2,"name":"猪八戒"}}


这样就可以根据这个对象的属性随意操作了，当id等于1的时候，我前面加个你好。

	<child :lists="nameList">
        <template slot-scope="a">
            <div v-if='a.bbbbb.id==1'>你好：<span>{{a.bbbbb.name}}</span></div>
            <div v-else>{{a.bbbbb.name}}</div>
        </template>
    </child>




  	